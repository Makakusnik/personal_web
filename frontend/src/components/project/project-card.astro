---
import type { Project } from "@/types";
import { Badge } from "@/components/ui/badge";

interface Props {
  project: Partial<Project>;
}

const { project } = Astro.props;

let badgeClass = "";
let badgeLabel = "";

switch (project.state) {
  case "online":
    badgeClass = "bg-emerald-100 text-emerald-700";
    badgeLabel = "Online";
    break;
  case "in-progress":
    badgeClass = "bg-amber-100 text-amber-700";
    badgeLabel = "In Progress";
    break;
  case "offline":
    badgeClass = "bg-rose-100 text-rose-700";
    badgeLabel = "Offline";
    break;
  default:
    badgeClass = "bg-gray-200 text-gray-700";
    badgeLabel = project.state || "Unknown";
}
---

<div class="card flex flex-col relative">
  <div class="project-status-badge-container">
    <Badge title={badgeLabel} className={badgeClass}>
      {badgeLabel}
    </Badge>
  </div>
  <img
    src={project.imagePath}
    alt={`${project.name} preview.`}
    class="rounded-md mb-4 w-full h-48 object-cover"
  />
  <span class="flex gap-2 items-baseline">
    <h3 class="text-2xl font-semibold text-primary mb-2">
      {project.name}
    </h3>
    <p class="text-muted">
      {project.type}
    </p>
  </span>
  <p class="text-gray-700 mb-4 flex-grow">
    {project.shortDescription}
  </p>
  <!-- Project Modal Slot -->
  <slot />
  <!-- Project Modal Slot -->
</div>

<style>
  .project-status-badge-container {
    position: absolute;
    top: 0;
    transform: translateY(-50%);
    right: 1rem;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .project-status-badge-label {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    color: #fff;
    font-weight: 600;
    font-size: 0.875rem;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
    letter-spacing: 0.01em;
    min-width: 2.5rem;
    text-align: center;
    user-select: none;
  }
</style>
